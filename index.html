<!doctype>
<html>
  <head>
    <title>Bowling Scorecard</title>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>

  <body>

    <h1>Bowling Scorecard</h1>

    <form>
      Please enter number of pins knocked down:<input type="text" id="enter_roll">
      <input type="submit" id="submit" value="Enter">
    </form>

    <table id="frames">
    </table>

    <script src='src/Player.js'></script>
    <script src='src/Frame.js'></script>
    <script src='src/ScoreCard.js'></script>
    <script src='http://code.jquery.com/jquery-2.1.1.min.js'></script>
    <script>
      $(document).ready(function(){

        var player = new Player('Ed');
        var scorecard = new ScoreCard(player);
        var printData = function(scorecard) {
          var data = '<tr><th>Frame</th><th>Roll</th><th>Pins</th><th>Frame score</th><th>Total score</th></tr>';
          for (var frame = 0; frame < scorecard.frames.length; frame++) {
            for (var roll = 0; roll < scorecard.frames[frame].rolls.length; roll++) {
              
              if (roll === scorecard.frames[frame].rolls.length-1) { var frameScore = scorecard.frames[frame].score
              } else { var frameScore = '' }
   
              if (frame === scorecard.frames.length-1 && roll === scorecard.frames[frame].rolls.length-1 ) { var totalScore = scorecard.totalScore()
              } else { var totalScore = '' }

              var data = data + ('<tr><td>' + (frame + 1) + '</td><td>' + (roll + 1) + '</td><td>' + (scorecard.frames[frame].rolls[roll]) + '</td><td>' + frameScore + '</td><td>' + totalScore + '</td></tr>');
            }
          }
          return data;
        }

        $('#submit').on('click', function(event) {
          event.preventDefault();
          var rollEntry = parseInt($('#enter_roll').val());
          scorecard.enterRoll(rollEntry);
          var tableData = printData(scorecard);
          $('#frames').html(tableData);
        })

      })
    </script>

  </body>

</html>
